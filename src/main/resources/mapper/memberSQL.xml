<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
	
	<!-- 대권 로그인 -->
	<select id="selectOneMember" parameterType="member" resultType="member">
 		select
 			member_no as memberNo,
 			member_id as memberId,
 			member_pw as memberPw,
 			member_nick as memberNick,
 			member_phone as memberPhone,
 			member_point as memberPoint,
 			member_reportcount as memberReportCount,
 			gender,
 			birth,
 			agreement,
 			grade,
 			member_picturename as memberPictureName,
 			member_picturepath as memberPicturePath,
 			enrollDate
 		from member_tbl where member_id=#{memberId}
 		<if test="memberPw != null">
 			and member_Pw=#{memberPw}
 		</if>
 	</select>
	
	<update id="updateMember" parameterType="m" >
	update into member_tbl set 
		member_id =#{memberId}, 
		member_nick =#{memberNick}, 
		member_pw=#{memberPw}, 
		member_Phone = #{memberPhone}, 
		gender = #{gender}, 
		birth = #{gender}  where member_no=#{memberNo}
	
	</update>
	 <select id ="selectQuestionList" parameterType="map" resultType="q">
 		select
 		qst_no as qstNo,
 		qst_title as qstTitle,
 		qst_date as qstDate
 		
 		
 		from question_tbl
  
  </select>

	<!-- 윤지 -->
	<select id="selectOneExpert" parameterType="int" resultType="expert">
 		select 
	 		EXPERT_NO as expertNo,
			MEMBER_NO as memberNo,
			EXPERT_CATEGORY as expertCateGory,
			EXPERT_TAG as expertTag,
			CREDENTIAL,
			ISSUING_AUTHORITY as issuingAuthority,
			ACQUISTION_DATE as acquistionDate,
			EXPERT_NAME as expertName,
			EXPERT_PHONE as expertPhone,
			EXPERT_EMAIL as expertEmail,
			EXPERT_CONTENT as expertContent,
			JOB_NAME as jobName
 		from 
 			(select n.*, (select comp_rep_name as compRepName from company_tbl where expert_no=n.expert_no) 
 		from 
 			(select * from expert_tbl)n)
 		where 
 			expert_no=#{expertNo}
 	</select>

</mapper>
